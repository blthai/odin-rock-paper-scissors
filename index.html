<!DOCTYPE html>
<html lang='en'>
  <head>
  <meta charset='utf-8'>
  <title>Rock paper scissors game</title>


  </head>

  <body>
    <script>
        function getComputerChoice(){
          let choices=['Rock','Paper','Scissors'];
          return choices[Math.floor(Math.random() * 3)];
        }
        
        function formatSelection(playerSelection){
          return playerSelection.substr(0,1).toUpperCase() + playerSelection.substr(1).toLowerCase()
        }

        function playRound(playerSelection, computerSelection){
          if(playerSelection.toUpperCase()===computerSelection.toUpperCase()){
            return `Tie! ${formatSelection(playerSelection)} matches ${computerSelection} evenly.`
          }
          else if(playerSelection.toUpperCase()==='ROCK' && computerSelection==='Scissors' ||
                  playerSelection.toUpperCase()==='PAPER' && computerSelection==='Rock' ||
                  playerSelection.toUpperCase()==='SCISSORS' && computerSelection==='Paper')
          {
            return `You win this round! ${formatSelection(playerSelection)} beats ${computerSelection}.`
          }
          else {
            return `You lose this round! ${computerSelection} beats ${formatSelection(playerSelection)}.`
          }
        }

        function game(){
          let playerScore=0;
          let computerScore=0;
          let currentRound=0;
          let playerSelection;
          let roundResult;
          while(currentRound<5){
            playerSelection=prompt('Choose one: rock, paper, or scissors');
            roundResult=playRound(playerSelection, getComputerChoice());
            if(roundResult.search('win')!==-1){
              playerScore++;
              currentRound++;
            }
            else if(roundResult.search('lose')!==-1){
              computerScore++;
              currentRound++;
            }
            console.log(roundResult + ` Player Score: ${playerScore} Computer Score: ${computerScore}`);
          }
          if(playerScore>computerScore){
            console.log('Congratulations! You Win!')
          }
          else{
            console.log('Sorry! You Lost.')
          }
        }

        game();
    </script>
  </body>
</html>